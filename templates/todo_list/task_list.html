{% extends "base.html" %}
{#{% load crispy_forms_filters %}#}

{% block content %}
  <h1>
    ToDo List

    <a href="{% url 'todo_list:task-create' %}" class="btn btn-primary link-to-page">
      Add task
    </a>
  </h1>
  <br>
  {% if task_list %}
    <div class="card">
      <ul class="list-group list-group-flush">
        {% for task in task_list %}

          <li class="list-group-item">
            <h4 class="card-title">{{ task.content }}</h4>

            {% if task.is_active %}
              <div class="alert alert-danger d-flex justify-content-between align-items-center" role="alert">Not done
                <a href="{% url 'todo_list:finish-task' pk=task.id %}" class="btn btn-success link-to-page mt-md-0">
                  Complete
                </a>
              </div>
            {% else %}
              <div class="alert alert-success d-flex justify-content-between align-items-center" role="alert">Done
              <a href="{% url 'todo_list:finish-task' pk=task.id %}" class="btn btn-secondary link-to-page my-auto">
                Undo
              </a></div>
            {% endif %}

            <div class="text-muted"><small>Created: {{ task.created }}</small></div>

            {% if task.deadline %}
              <div style="color: indianred"><small>Deadline: {{ task.deadline }}</small></div>
            {% endif %}
            <div>Tags:
              {% for tag in task.tags.all %}
                <i>{{ tag }}</i>

              {% endfor %}
            <li class="list-group-item">
              <a href="{% url 'todo_list:task-update' pk=task.id %}" class="btn btn-outline-secondary">
              Update
            </a>
            <a href="{% url 'todo_list:task-delete' pk=task.id %}" class="btn btn-outline-danger">
              Delete
            </a>
            </li>
            </div>
          </li>
        <br>
        {% endfor %}
      </ul>
    </div>
  {% else %}
    <p>No tasks!</p>
  {% endif %}
{% endblock %}
